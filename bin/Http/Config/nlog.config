<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sl="http://www.nlog-project.org/schemas/NLog.Targets.Syslog.xsd" throwExceptions="false" autoReload="true">

  <variable name="pathToLogs" value="c:\logs"/>

  <targets>
    <!--Archive after 10Mb and every Day -->
    <!--${logger}-->
    <target name="file" xsi:type="File" 
            layout="${longdate} ${uppercase:${level}}[${threadid}]  ${message} ${all-event-properties} ${exception:format=tostring}"
            fileName="${var:pathToLogs}/wrapper-client.log" 
            archiveEvery ="Day"
            archiveFileName="${var:pathToLogs}/wrapper-client.log.{#}"
            archiveNumbering="DateAndSequence"
            archiveAboveSize="10485760"
            archiveDateFormat="yyyy-MM-dd" 
            keepFileOpen="false"
            encoding="utf-8" />

    <target name="wcfInvocation" xsi:type="File" layout="${longdate} ${uppercase:${level}}[${threadid}] ${logger} ${message} ${all-event-properties} ${exception:format=tostring}"
            fileName="${var:pathToLogs}/wcf.log" archiveFileName="${var:pathToLogs}/wcf.log.{#}"
            archiveEvery ="Day"
            archiveNumbering="DateAndSequence"
            archiveAboveSize="10485760"
            archiveDateFormat="yyyy-MM-dd" 
            keepFileOpen="false"
            encoding="utf-8" />

    <compound-target xsi:type="SplitGroup" name="all">
      <target-ref name="file" />
    </compound-target>
  </targets>
  <rules>
    <logger name="WcfInvocation" minLevel="Debug" writeTo="wcfInvocation" final="true" />
    <logger name="*" minlevel="Debug" writeTo="all" />
  </rules>
</nlog>